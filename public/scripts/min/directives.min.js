"use strict";angular.module("pillboxApp.directive",[]),angular.module("pillboxApp.directive").factory("uuid",function(){var a={"new":function(){function a(a){var b=(Math.random().toString(16)+"000000000").substr(2,8);return a?"-"+b.substr(0,4)+"-"+b.substr(4,4):b}return a()+a(!0)+a(!0)+a()},empty:function(){return"00000000-0000-0000-0000-000000000000"}};return a}),angular.module("pillboxApp.directive").directive("fileModel",["$parse",function(a){return{restrict:"A",link:function(b,c,d){c.bind("change",function(){a(d.fileModel).assign(b,c[0].files[0]),b.$apply()})}}}]),angular.module("pillboxApp.directive").directive("isDraggable",["$rootScope",function(a){return{restrict:"A",link:function(b,c){angular.element(c).attr("id");c.bind("dragstart",function(d){console.log(b),b.med.id&&(b.$parent.list=b.$parent.list.filter(function(a){return a.id!==b.med.id}));var e=angular.element(d.currentTarget).attr("id");console.log("dragstart id",e);var f=angular.toJson(b.med);d.dataTransfer.setData("Text",f),d.dataTransfer.setData("id",angular.element(d.currentTarget).attr("id")),console.log(c,d.currentTarget),a.$emit("ANGULAR_DRAG_START")}),c.bind("dragover",function(a){return a.preventDefault&&a.preventDefault(),a.dataTransfer.dropEffect="move",!1})}}}]),angular.module("pillboxApp.directive").directive("dropTarget",["$parse","$rootScope","uuid",function(a,b,c){return{restrict:"A",scope:{ngModel:"="},link:function(a,d){function e(a){return a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.dataTransfer.dropEffect="move",!1}function f(d){var e=angular.element(d.currentTarget).attr("id");e||(e=c.new(),angular.element(d.currentTarget).attr("id",e)),b.$emit("ANGULAR_DRAG_END"),d.preventDefault&&d.preventDefault(),d.stopPropagation&&d.stopPropagation();var f=d.dataTransfer.getData("text");f=angular.fromJson(f),f.id||(f.id=c.new()),a.ngModel.push(f),a.$apply()}b.$on("ANGULAR_DRAG_START",function(){d.bind("dragover",e),d.bind("drop",f)}),b.$on("ANGULAR_DRAG_END",function(){d.unbind("dragover",e),d.unbind("drop",f)})}}}]);
//# sourceMappingURL=directives.min.map