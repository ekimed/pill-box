!function(){"use strict";angular.module("pillboxApp").controller("FileController",["$scope","$upload","$location","fileUpload","Data",function(a,b,c,d,e){a.onFileSelect=function(d){var f=d[0];a.upload=b.upload({url:"/fileupload",method:"POST",file:f}).progress(function(a){console.log("percent: "+parseInt(100*a.loaded/a.total))}).success(function(a,b,d,f){console.log("data: ",a,"status: ",b),e.setData(a),c.path("/index")})},a.clickInput=function(){$(".fileupload").click()},a.onhover=!1,a.nothover=!0,a.onHover=function(b){a.nothover=!1,a.onhover=!0},a.notHover=function(){a.hover=!1,a.nothover=!0}}])}(),function(){angular.module("pillboxApp").controller("MedListCtrl",["$scope","$q","$timeout","Data","esService","InteractionAPI",function(a,b,c,d,e,f){var g=a.esData=[];a.ddiDetected=!1,a.tooltipMsg="Drug interactions between your medications were detected. Click to view.";var h=function(a,b){var c={PARTIAL:"phrase_prefix",DEFAULT:"best_fields"},d={size:5,body:{query:{multi_match:{query:a,type:c[b],fields:["FULL_NAME","FULL_GENERIC_NAME","BRAND_NAME","DISPLAY_NAME","DISPLAY_NAME_SYNONYM"]}}}};return d},i=function(a){var b,c,d=0,e=null;for(c=0;c<a.length;c++)b=a[c],b._score>d&&(d=a._score,e=b);return e},j=d.getData();if(a.data=j?d.getData().data:[],a.name=j?d.getData().firstName:"Hello",a.data.length>=2){var k=a.data.map(function(a){return e.search(h(a.Medication,"DEFAULT"))});b.all(k).then(function(b){console.log(b),g=b.map(function(a){return i(a.hits.hits)}),c(function(){a.esData=g;var b=function(){a.ddiDetected=!0};f.getInteractions(g).success(function(a){console.log(a),b()}).error(function(a,b){console.log("err_data:",a),console.log("err_status:",b)})})})}}])}(),function(){"use strict";angular.module("pillboxApp").controller("DropDeleteCtrl",["$scope",function(a){a.list=[]}])}(),function(){"use strict";angular.module("pillboxApp").controller("ScheduleCtrl",["$scope","Data",function(a,b){var c=b.getData();a.schedule=c?c.schedule:[]}])}(),function(){"use strict";angular.module("pillboxApp").controller("SearchMedListCtrl",["$scope","esService","esFactory",function(a,b,c){a.esResults=[],a.isResults=!1,a.selected_idx=0;var d=function(a){var b={size:5,body:{query:{multi_match:{query:a,type:"phrase_prefix",fields:["FULL_NAME","FULL_GENERIC_NAME","BRAND_NAME","DISPLAY_NAME","DISPLAY_NAME_SYNONYM"]}}}};return b};b.cluster.state({metric:["cluster_name","nodes","master_node","version"]}).then(function(b){a.clusterState=b,a.error=null})["catch"](function(b){a.clusterState=null,a.error=b,b instanceof c.errors.NoConnections&&(a.error=new Error("Unable to connect to elasticsearch.Make sure that it is running and listening at http://localhost:9200"))}),a.getIndex=function(b){return a.selected_idx=b,b},a.checkKeyDown=function(b){40===b.keyCode&&a.esResults.length?a.selected_idx<a.esResults.length?a.selected_idx+=1:a.selected_idx=0:38===b.keyCode&&a.esResults.length&&(a.selected_idx>0?a.selected_idx-=1:a.selected_idx=0)},a.esQuery=function(){if(!(a.searchTerm.length>2))return void(a.isResults=!1);var c=d(a.searchTerm);b.search(c,function(b,c){if(b)throw b;a.esResults=c.hits.hits.map(function(a){return a._source}),a.isResults=a.esResults.length?!0:!1})}}])}();
//# sourceMappingURL=controllers.min.map